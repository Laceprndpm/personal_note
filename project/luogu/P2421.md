---
title: " [NOI2002] 荒岛野人"
date: 2025-12-12
last_clear: 2025-12-12
tags:
  - luogu
grasp:
value:
difficulty:
optional_difficulty:
source: https://www.luogu.com.cn/problem/P2421
article:
---
``` cpp showLineNumbers
int exgcd(int a, int b, int &x, int &y)
{
    if (b == 0) {
        x = 1, y = 0;
        return a;
    }
    int d = exgcd(b, a % b, y, x);
    y -= a / b * x;
    return d;
}

void solve()
{
    int n;
    cin >> n;
    vector<array<int, 3>> arr(n);
    int                   mx = 0;
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < 3; j++) {
            cin >> arr[i][j];
        }
        mx = max(mx, arr[i][0]);
    }
    auto check = [&](int m) {
        bool bad = 0;
        for (int i = 0; i < n; i++) {
            for (int j = i + 1; j < n; j++) {
                int c = arr[j][0] - arr[i][0];
                int a = arr[i][1] - arr[j][1], b = m;
                int x, y;
                int r = exgcd(a, b, x, y);
                if (c % r != 0) continue;
                b /= r;
                if (b < 0) b = -b;
                x = ((ll(x) * c / r) % b + b) % b;
                if (x <= min(arr[i][2], arr[j][2])) {
                    bad = 1;
                    return bad;
                }
            }
        }
        return bad;
    };
    int i;
    for (i = mx; i <= 1e6; i++) {
        if (!check(i)) {
            break;
        }
    }
    cout << i << '\n';
}
```