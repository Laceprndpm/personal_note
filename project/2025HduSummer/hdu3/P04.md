---
title: 三带一
date: 2025-07-25
last_clear: 2025-07-25
tags:
  - tag/二分搜索
grasp: 1
difficulty: 1900
optional_difficulty:
source: https://acm.hdu.edu.cn/contest/problem?cid=1174&pid=1004
article:
---
假如能打出 $ans$ 张三带一，则一定能打出 $ans-1$ 张三带一，所以数量具有单调性。
### 尝试进行二分:
若打出 $ans$ 张三带一，若每张牌被用了 $b_i \cdot 3$ 张作为"三"去带人，则：
$$
\begin{align}
a_i - 3 \cdot b_i = c_i \ge 0
\end{align}
$$
其中若打出 x 张三带一，必然余下 x 张来作"一"，得到约束
$$
4 \cdot ans \le \sum a_i
$$
由 $\left\lfloor \frac{\text{max}(a_i)}{3} \right\rfloor \ge \text{others}$ 的情况观察到， $b_i和c_i间应存有约束$ 
记 $C = \sum c_i = \sum a_i - 3 \cdot ans$  
当存在 $B_i > C - C_i$ 则 $B_i$ 无法全部打出，因此 $b_i + c_i \le C$ 
而当存在 $b_i + c_i = C$ 时，明显的只能让所有其他的 $c_i$ 去匹配该 $b_i$ 。
而当所有 $b_i + c_i \le C$ 时，可以自由匹配，从而使得某个 $b_i + c_i = C$ ，随后复用上述策略，如此往复，可以证明 $b_i$ 一定可以全部取完。
随后，将 $c_i$ 用 $a_i - 3 \cdot b_i = c_i$ 带入可得
$$
b_i \ge \left\lceil \frac{a_i - \sum a_i + 3 \cdot ans}{2} \right\rceil
$$
最后整理所有限制
$$
[ans \le \frac{\sum a_i}{4}] \land [\left\lceil \frac{a_i - \sum a_i + 3 \cdot ans}{2} \right\rceil \le b_i \le \left\lfloor \frac{a_i}{3} \right\rfloor]
$$
且最终，所有 $b_i$ 算出来的 $lowerbound$ 和 $upperbound$ 可以包含住 $ans$。
### 反思:
写的时候只是提了一嘴当 $\left\lfloor \frac{\text{max}(a_i)}{3} \right\rfloor \ge \text{others}$ 的情况，没有继续深入观察到实际上是 $\text{max}(b_i + c_i) \le C$ ，应当写更多式子。
