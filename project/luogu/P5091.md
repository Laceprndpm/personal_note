---
title:
date:
last_clear:
tags:
grasp:
value:
difficulty:
optional_difficulty:
source:
article:
---
```py
import sys

sys.set_int_max_str_digits(30000660)
a, m, b = input().split()
a = int(a)
m = int(m)
b = b.rstrip()


def moudle(x, mod):
    res = 0
    for ch in x:
        res = (res * 10 + int(ch)) % mod
    return res


def get_phi(x):
    res = x
    i = 2
    while i * i <= x:
        if x % i == 0:
            while x % i == 0:
                x //= i
            res -= res // i
        i += 1
    if x > 1:
        res -= res // x
    return res


phi_m = get_phi(m)
if len(b) <= 20 and int(b) < phi_m:
    print((pow(a, (int(b)), m)) % m)
else:
    b = moudle(b, phi_m)
    print((pow(a, b % phi_m + phi_m, m)) % m)

```
