---
title: E. Arena
date: 2025-05-05
last_clear: 2025-11-22
tags:
  - edu
  - tag/dp/计数
grasp: 4
value: 3
difficulty: 2100
optional_difficulty:
source: https://codeforces.com/contest/1606/problem/E
article:
---
其实拓展时，我们需要的状态只有所有英雄中血量最多的，所以用 `dp[i][j]` 就行。
需要注意每轮死的人本身也是有顺序的，所以要乘上 `comb.binom(i, k)`。
```cpp showLineNumbers
void solve()
{
    int n, x;
    cin >> n >> x;
    vector<vector<Z>> dp(n + 1, vector<Z>(501));  // 场上有 i 人，生命最高的人为 j, 减少k人，那么i - k, j - (i - 1)
    for (int i = 1; i <= 500; i++) {
        dp[1][i] = 1;
    }
    for (int i = 2; i <= n; i++) {
        for (int j = 1; j <= 500; j++) {
            for (int k = 0; k < i; k++) {
                if (j >= i - 1) dp[i][j] += dp[i - k][j - (i - 1)] * comb.binom(i, k) * power(Z(i - 1), k);
            }
        }
    }
    Z ans = 0;
    for (int i = 1; i <= x; i++) {
        ans += dp[n][i];
    }
    ans = power(Z(x), n) - ans;
    cout << ans << '\n';
}
```
