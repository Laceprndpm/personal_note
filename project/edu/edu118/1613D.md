---
title: D. MEX Sequences
date: 2025-05-09
last_clear: 2025-11-25
tags:
  - edu
  - tag/dp
grasp: 3
value: 2
difficulty:
optional_difficulty:
source: https://codeforces.com/contest/1613/problem/D
article:
---
注意到方案一定是 `0, 0..0, 1..1, ... x..x, x+2..x+2, x..x, x+2..x+2` 随后 `dp` 即可。
```cpp showLineNumbers
void solve()
{
    int n;
    cin >> n;
    vector<int> arr(n);
    for (int i = 0; i < n; i++) {
        cin >> arr[i];
    }
    vector<Z> dp1(n + 2), dp2(n + 2);
    dp1[0] = 1;
    for (int i = 0; i < n; i++) {
        dp1[arr[i] + 1] += dp1[arr[i] + 1];
        dp1[arr[i] + 1] += dp1[arr[i]];

        if (arr[i] > 0) dp2[arr[i] - 1] += dp2[arr[i] - 1];
        if (arr[i] > 0) dp2[arr[i] - 1] += dp1[arr[i] - 1];
        dp2[arr[i] + 1] += dp2[arr[i] + 1];
    }
    Z ans;
    for (Z x : dp1)
        ans += x;
    for (Z x : dp2)
        ans += x;
    ans -= 1;
    cout << ans << '\n';
}
```
