---
title: D. Progressions Covering
date: 2025-03-26
last_clear: 2025-11-27
tags:
  - edu
  - tag/贪心
grasp: 4
value: 3
difficulty: 1900
optional_difficulty:
source: https://codeforces.com/contest/1661/problem/D
article:
---
很显然的贪心思路，从后往前依次贪心地放 `1~k` 即可。
如果从前面，会遇到 `1 -1 -3` 的情况，此时并不是直接放 `1~k` ，因为有后效性，而从后往前则没有。
随后这是我用单调队列模拟， `first` 是下标， `second` 是数量
```cpp showLineNumbers
void solve()
{
    i64 n, k;
    cin >> n >> k;
    vector<i64> arr(n + 1);
    for (int i = n; i >= 1; i--) {
        cin >> arr[i];
    }
    deque<pair<i64, i64>> q_idx_size;
    i64                   curVal = 0;
    i64                   cnt    = 0;
    i64                   num    = 0;
    for (int i = 1; i <= n; i++) {
        while (!q_idx_size.empty() && i - q_idx_size.front().first >= k) {
            num -= q_idx_size.front().second;
            q_idx_size.pop_front();
        }
        if (curVal < arr[i]) {
            pair<i64, i64> cur;
            i64            nowK = min(k, n - i + 1);
            cur.first           = i;
            i64 curNum          = (arr[i] - curVal + nowK - 1) / nowK;
            cur.second          = curNum;
            q_idx_size.push_back(cur);
            curVal += curNum * min(k, n - i + 1);
            cnt += curNum;
            num += curNum;
        }
        curVal -= num;
    }
    cout << cnt << '\n';
}
```
